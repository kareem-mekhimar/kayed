{"version":3,"sources":["../../../src/services/handlers/offer-messages.handler.js"],"names":["OfferMessageHandler","io","init","nsp","of","on","console","log","socket","room","data","offerId","join","create","message","findById","id","populate","to","emit"],"mappings":";;;;;;;;AAAA;;;;;;;;;;IAEMA,mB;AAEF,iCAAYC,EAAZ,EAAe;AAAA;;AACZ,aAAKA,EAAL,GAAWA,EAAX;AACA,aAAKC,IAAL;AACF;;;;+BAEK;AAAA;;AACH,gBAAIC,MAAM,KAAKF,EAAL,CAAQG,EAAR,CAAW,SAAX,CAAV;;AAEAD,gBAAIE,EAAJ,CAAO,YAAP,EAAoB,kBAAS;AACzBC,wBAAQC,GAAR,CAAY,YAAZ;;AAEAC,uBAAOH,EAAP,CAAU,WAAV,EAAsB,gBAAQ;AAC1BC,4BAAQC,GAAR,CAAY,MAAZ;AACAC,2BAAOC,IAAP,GAAcC,KAAKC,OAAnB;AACAH,2BAAOI,IAAP,CAAYF,KAAKC,OAAjB;AACH,iBAJD;;AAMAH,uBAAOH,EAAP,CAAU,YAAV;AAAA,uFAAuB,iBAAMK,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACC,uBAAaG,MAAb,CAAoBH,IAApB,CADD;;AAAA;AACfI,+CADe;AAAA;AAAA,+CAEH,uBAAaC,QAAb,CAAsBD,QAAQE,EAA9B,EAAkCC,QAAlC,CAA2C,aAA3C,CAFG;;AAAA;AAEnBH,+CAFmB;;;AAInBX,4CAAIe,EAAJ,CAAOV,OAAOC,IAAd,EAAoBU,IAApB,CAAyB,YAAzB,EAAsCL,OAAtC;;AAJmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB;;AAAA;AAAA;AAAA;AAAA;AAMH,aAfD;AAgBF;;;qCAEYJ,I,EAAK,CAEjB;;;;;;kBAKUV,mB","file":"offer-messages.handler.js","sourcesContent":["import OfferMessage from \"../../models/offer-message.model\" ;\n\nclass OfferMessageHandler{\n   \n    constructor(io){\n       this.io  = io ;    \n       this.init() ;\n    }\n        \n    init(){\n       let nsp = this.io.of(\"/offers\") ;\n       \n       nsp.on(\"connection\",socket =>{\n           console.log(\"Connection\") ;\n\n           socket.on(\"offerJoin\",data => {\n               console.log(\"join\")\n               socket.room = data.offerId ;\n               socket.join(data.offerId) ;\n           });\n\n           socket.on(\"newMessage\",async data => {\n               let message = await OfferMessage.create(data) ;\n               message = await OfferMessage.findById(message.id).populate(\"relatedUser\") ;\n              \n               nsp.to(socket.room).emit(\"newMessage\",message) ;\n           });\n       })\n    }\n\n    onNewMessage(data){  \n       \n    }\n    \n}\n\n\nexport default OfferMessageHandler"]}