{"version":3,"sources":["../src/app.js"],"names":["Promise","global","connect","mongoUrl","app","use","get","req","res","setHeader","send","static","join","__dirname","next","contype","headers","indexOf","status","error","urlencoded","extended","json","Error","err","success","message","console","log"],"mappings":";;;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;AACA;;;;AACA;;;;;;AAEA,mBAASA,OAAT,GAAmBC,OAAOD,OAA1B;AACA,mBAASE,OAAT,CAAiB,iBAAOC,QAAxB;;AAEA,IAAMC,MAAM,wBAAZ;;AAEAA,IAAIC,GAAJ,CAAQ,qBAAR;AACAD,IAAIC,GAAJ,CAAQ,uBAAR;;AAGAD,IAAIE,GAAJ,CAAQ,eAAR,EAAyB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACzCA,QAAIC,SAAJ,CAAc,cAAd,EAA8B,kBAA9B;AACAD,QAAIE,IAAJ;AACH,CAHD;;AAKAN,IAAIC,GAAJ,CAAQ,OAAR,EAAgB,kBAAQM,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,MAArB,CAAf,CAAhB;AACAT,IAAIC,GAAJ,CAAQ,UAAR,EAAmB,kBAAQM,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAf,CAAnB;;AAGA;AACAT,IAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACE,GAAD,EAAMC,GAAN,EAAWM,IAAX,EAAoB;AAC7B,QAAIC,UAAUR,IAAIS,OAAJ,CAAY,cAAZ,CAAd;AACA,QAAID,WAAYA,QAAQE,OAAR,CAAgB,kBAAhB,MAAwC,CAAxD,EACI,OAAOT,IAAIU,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB,EAAES,OAAO,6BAA6BJ,OAA7B,GAAuC,GAAhD,EAArB,CAAP;AACJD;AACH,CALD;;AAQAV,IAAIC,GAAJ,CAAQ,qBAAWe,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAjB,IAAIC,GAAJ,CAAQ,qBAAWiB,IAAX,EAAR;AACAlB,IAAIC,GAAJ,CAAQ,iCAAR;;AAGA;AACAD,IAAIC,GAAJ,CAAQ,SAAR;;AAGA;AACAD,IAAIC,GAAJ,CAAQ,UAACE,GAAD,EAAMC,GAAN,EAAWM,IAAX,EAAoB;AACxB,QAAMK,QAAQ,IAAII,KAAJ,CAAU,cAAV,CAAd;AACAJ,UAAMD,MAAN,GAAe,GAAf;AACAJ,SAAKK,KAAL;AACH,CAJD;;AAOA;AACAf,IAAIC,GAAJ,CAAQ,UAACmB,GAAD,EAAMjB,GAAN,EAAWC,GAAX,EAAgBM,IAAhB,EAAyB;AAC7B,QAAMI,SAASM,IAAIN,MAAJ,GAAaM,IAAIN,MAAjB,GAA0B,GAAzC;AACAV,QAAIU,MAAJ,CAAWA,MAAX,EAAmBI,IAAnB,CAAwB;AACpBG,iBAAS,KADW;AAEpBN,eAAOK,IAAIE;AAFS,KAAxB;AAICC,YAAQC,GAAR,CAAYJ,GAAZ;AACJ,CAPD;;kBAWepB,G","file":"app.js","sourcesContent":["\nimport express from \"express\";\nimport path from \"path\";\nimport bodyparser from \"body-parser\";\nimport cors from \"cors\";\nimport expressValidator from \"express-validator\";\nimport helmet from \"helmet\" ;\nimport mongoose from \"mongoose\";\n\n\nimport swaggerSpec from \"./services/swagger\" ; \nimport config from \"./config\";\nimport router from \"./routes\";\n\nmongoose.Promise = global.Promise;\nmongoose.connect(config.mongoUrl);\n\nconst app = express();\n\napp.use(cors());\napp.use(helmet()) ;\n\n\napp.get('/swagger.json', function (req, res) {\n    res.setHeader('Content-Type', 'application/json');\n    res.send(swaggerSpec);\n});\n\napp.use('/docs',express.static(path.join(__dirname, 'docs')));\napp.use('/uploads',express.static(path.join(__dirname, 'uploads'))) ;\n\n\n// Ensure Content Type\napp.use('/', (req, res, next) => {\n    let contype = req.headers['content-type'];\n    if (contype && (contype.indexOf('application/json') !== 0))\n        return res.status(415).send({ error: \"Unsupported Media Type (\" + contype + \")\" });\n    next();\n});\n\n\napp.use(bodyparser.urlencoded({ extended: false }));\napp.use(bodyparser.json());\napp.use(expressValidator());\n\n\n//Routes\napp.use('/api/v1', router);\n\n\n//Not Found Handler\napp.use((req, res, next) => {\n    const error = new Error(\"Not Found..!\");\n    error.status = 404;\n    next(error);\n});\n\n\n//ERROR Handler\napp.use((err, req, res, next) => {\n    const status = err.status ? err.status : 500;\n    res.status(status).json({\n        success: false,\n        error: err.message\n    });\n     console.log(err);\n});\n\n\n\nexport default app;\n\n"]}