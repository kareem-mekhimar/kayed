{"version":3,"sources":["../../src/utils/index.js"],"names":["writeBase64AndReturnUrl","base64String","name","req","mimeType","base64MimeType","extension","split","base64Data","pop","appUrl","protocol","get","fileName","writeFile","__dirname","encoding","err","console","log","encoded","result","mime","match","length"],"mappings":";;;;;QAKgBA,uB,GAAAA,uB;;AAJhB;;;;AACA;;;;;;AAGO,SAASA,uBAAT,CAAiCC,YAAjC,EAA8CC,IAA9C,EAAmDC,GAAnD,EAAwD;;AAE3D,MAAIC,WAAWC,eAAeJ,YAAf,CAAf;AACA,MAAIK,YAAYF,SAASG,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAhB;;AAEA,MAAIC,aAAaP,aAAaM,KAAb,CAAmB,UAAnB,EAA+BE,GAA/B,EAAjB;;AAEA,MAAIC,SAASP,IAAIQ,QAAJ,GAAe,KAAf,GAAuBR,IAAIS,GAAJ,CAAQ,MAAR,CAApC;AACA,MAAIC,WAAWX,OAAK,GAAL,GAASI,SAAxB;;AAEA,eAAGQ,SAAH,CAAaC,YAAW,cAAX,GAA0BF,QAAvC,EAAiDL,UAAjD,EAA6D,EAAEQ,UAAU,QAAZ,EAA7D,EAAqF,UAAUC,GAAV,EAAe;AAChGC,YAAQC,GAAR,CAAY,kBAAgBF,GAA5B;AACH,GAFD;;AAIA,SAAOP,SAAS,WAAT,GAAqBG,QAA5B;AACH;;AAGD,SAASR,cAAT,CAAwBe,OAAxB,EAAiC;AAC7B,MAAIC,SAAS,IAAb;;AAEA,MAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,WAAOC,MAAP;AACD;;AAED,MAAIC,OAAOF,QAAQG,KAAR,CAAc,2CAAd,CAAX;;AAEA,MAAID,QAAQA,KAAKE,MAAjB,EAAyB;AACvBH,aAASC,KAAK,CAAL,CAAT;AACD;;AAED,SAAOD,MAAP;AACD","file":"index.js","sourcesContent":["\nimport fs from \"fs\";\nimport url from \"url\" ;\n\n\nexport function writeBase64AndReturnUrl(base64String,name,req) {\n    \n    let mimeType = base64MimeType(base64String) ;\n    let extension = mimeType.split(\"/\")[1] ;\n    \n    let base64Data = base64String.split(';base64,').pop();\n\n    let appUrl = req.protocol + '://' + req.get('host') ;\n    let fileName = name+\".\"+extension ;\n\n    fs.writeFile(__dirname +\"/../uploads/\"+fileName, base64Data, { encoding: 'base64' }, function (err) {\n        console.log('File created '+err);\n    });\n\n    return appUrl + \"/uploads/\"+fileName ;\n}\n\n\nfunction base64MimeType(encoded) {\n    var result = null;\n  \n    if (typeof encoded !== 'string') {\n      return result;\n    }\n  \n    var mime = encoded.match(/data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/);\n  \n    if (mime && mime.length) {\n      result = mime[1];\n    }\n  \n    return result;\n  }"]}